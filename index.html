<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>The Wagner Training | Activity log</title>
        <link rel="icon" href="./images/favicon.png" />
        <link rel="stylesheet" href="./css/default.css" />
        <link rel="stylesheet" href="./assets/metrics-graphics/dist/metricsgraphics.css" />
        <link rel="stylesheet" href="./assets/leaflet/dist/leaflet.css" />
        <link rel="stylesheet" href="./assets/leaflet-fullscreen/dist/leaflet.fullscreen.css" />
        <script src="./assets/jquery/dist/jquery.min.js"></script>
        <script src="./assets/d3/build/d3.min.js"></script>
        <script src="./assets/leaflet/dist/leaflet.js"></script>
        <script src="./assets/leaflet-fullscreen/dist/Leaflet.fullscreen.min.js"></script>
        <script src="./assets/@mapbox/leaflet-omnivore/leaflet-omnivore.min.js"></script>
        <script src="./assets/metrics-graphics/dist/metricsgraphics.min.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <a href="./">Home</a>
                <a href="./archive">Archive</a>
                <a href="./about">About</a>
            </nav>
        </header>

        <main role="main">
            <h1>Activity log</h1>
            <div id="distance-this-week"></div>

<script>

function addDays(date, days) {
  var result = new Date(date);
  result.setDate(result.getDate() + days);
  return result;
}

d3.json('data/distance.json', function(data) {
    data = MG.convert.date(data, 'date');
    var totals = new Array();
    var total_distance = 0;
    for (i = 0; i < data.length; i++) {
        total_distance += data[i].distance;
        console.log(data[i].date, total_distance);
        totals[i] = {
            "date": new Date(data[i].date),
            "distance": total_distance,
        }
    }

    var max_day = addDays(data[0].date, 7);

    MG.data_graphic({
        title: 'Distance in the last 7 days',
        target: '#distance-this-week',
        data: totals,
        full_width: true,
        interpolate: d3.curveLinear,

        x_accessor: 'date',
        y_accessor: 'distance',
        yax_units: "km",
        yax_units_append: true,

        max_x:  max_day,

        point_size: 3,
        active_point_on_lines: true,
        active_point_accessor: 'distance',
        active_point_size: 3,
    });
});
</script>

<h2>Recent</h2>
<ul>
    
        <li>
            <a href="./posts/2018-12-20-Sauvabelin/">Sauvabelin</a> - December 20, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-18-Pyramides/">Pyramides</a> - December 18, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-16-La-Sarraz-Bretonnieres/">La Sarraz - Bretonnières</a> - December 16, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-15-Short-run/">Short run</a> - December 15, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-11-Short-run/">Short run</a> - December 11, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-10-Curling/">Curling</a> - December 10, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-08-Trail-des-Chateux/">Trail des Chateaux 2018</a> - December  8, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-06-Short-run/">Short run</a> - December  6, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-04-Sauvabelin/">Sauvabelin</a> - December  4, 2018
        </li>
    
        <li>
            <a href="./posts/2018-12-03-Curling/">Curling</a> - December  3, 2018
        </li>
    
</ul>


<p>…or you can find more in the <a href="./archive">archives</a>.</p>

        </main>

        <footer>
            © 2018 David Wagner. All Rights Reserved
        </footer>
    </body>
</html>
